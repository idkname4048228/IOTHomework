<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Calendar QR Code Generator</title>
        <link rel="stylesheet" href="main.css">
        <script
            src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
    </head>
    <body>
        <label for="year">Select Year:</label>
        <select id="year">
        </select>
        <div id="qrcode"></div>

        <script>// 取得行事曆年份資料並顯示在下拉式選單中
fetch('http://localhost:3000/calendars')
    .then(response => response.json())
    .then(data => {
        const yearSelect = document.getElementById('year');
        data.forEach(calendar => {
            const option = document.createElement('option');
            option.value = calendar.url;
            option.textContent = calendar.year;
            yearSelect.appendChild(option);
        });
        // 當選擇年份時，生成對應的 QR code
        yearSelect.addEventListener('change', () => {
            const selectedUrl = yearSelect.value;
            generateQRCode(selectedUrl);
        });
    })
    .catch(error => console.error('Error:', error));

// 生成 QR code 函數
function generateQRCode(url) {
    const qrcodeDiv = document.getElementById('qrcode');
    qrcodeDiv.innerHTML = ''; // 清空先前的 QR code
    // 使用 QRCode.js 生成 QR code
    new QRCode(qrcodeDiv, {
        text: url,
        width: 500,
        height: 500
    });
}
</script>
        <!-- 引入 QRCode.js -->

    </body>
</html>
